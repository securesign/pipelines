- op: add
  path: /spec/resources/-
  value:
    apiVersion: appstudio.redhat.com/v1alpha1
    kind: Component
    metadata:
      annotations:
        build.appstudio.openshift.io/pipeline: '{"name":"docker-build-oci-ta","bundle":"latest"}'
        git-provider: github
        git-provider-url: https://github.com
        mintmaker.appstudio.redhat.com/disabled: "{{.mintmakerDisabled}}"
      name: "timestamp-authority{{.nameSuffix}}"
    spec:
      application: "{{.application}}{{.nameSuffix}}"
      componentName: "timestamp-authority"
      build-nudges-ref:
        - "artifact-signer-ansible{{.nameSuffix}}"
        - "rhtas-operator{{.nameSuffix}}"
      source:
        git:
          url: https://github.com/securesign/timestamp-authority.git
          revision: "{{.branch}}"
          dockerfileUrl: Dockerfile.tsa.rh
- op: add
  path: /spec/resources/-
  value:
    apiVersion: appstudio.redhat.com/v1alpha1
    kind: ImageRepository 
    metadata:
      name: "timestamp-authority{{.nameSuffix}}"
      annotations:
        image-controller.appstudio.redhat.com/update-component-image: 'true'
      labels:
        appstudio.redhat.com/application: "{{.application}}{{.nameSuffix}}"
        appstudio.redhat.com/component: "timestamp-authority{{.nameSuffix}}"
    spec:
      image:
        name: rhtas-tenant/timestamp-authority
        visibility: public
      notifications:
        - config:
            url: https://bombino.api.redhat.com/v1/sbom/quay/push
          event: repo_push
          method: webhook
          title: SBOM-event-to-Bombino