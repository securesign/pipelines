- op: add
  path: /spec/resources/-
  value:
    apiVersion: appstudio.redhat.com/v1beta2
    kind: IntegrationTestScenario
    metadata:
      labels:
        test.appstudio.openshift.io/optional: "false"
      name: "rhtas-operator-e2e-test{{.nameSuffix}}"
    spec:
      application: "{{.application}}{{.nameSuffix}}"
      contexts:
        - description: runs the integration test for a group Snapshot
          name: group
      params:
        - name: releaseBranch
          value: "{{.branch}}"
      resolverRef:
        params:
          - name: url
            value: https://github.com/securesign/pipelines.git
          - name: revision
            value: main
          - name: pathInRepo
            value: pipelines/integration-test/rhtas-operator-e2e.yaml
        resolver: git
        resourceKind: pipelinerun

- op: add
  path: /spec/resources/-
  value:
    apiVersion: appstudio.redhat.com/v1beta2
    kind: IntegrationTestScenario
    metadata:
      labels:
        test.appstudio.openshift.io/optional: "false"
      name: "rhtas-operator-e2e-test{{.nameSuffix}}-fips"
    spec:
      application: "{{.application}}{{.nameSuffix}}"
      contexts:
        - description: "runs the integration test for a group Snapshot or disable where not supported"
          name: >-
            {{- if or (eq .version "v1.3") (eq .version "v1.2")  -}}
            disabled
            {{- else -}}
            group
            {{- end -}}
      params:
        - name: FIPS_ENABLED
          value: "true"
        - name: CLUSTER_PLATFORM
          value: "openshift"
        - name: releaseBranch
          value: "{{.branch}}"
      resolverRef:
        params:
          - name: url
            value: https://github.com/securesign/pipelines.git
          - name: revision
            value: main
          - name: pathInRepo
            value: pipelines/integration-test/rhtas-operator-e2e.yaml
        resolver: git
        resourceKind: pipelinerun
