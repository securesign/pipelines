- op: add
  path: /spec/resources/-
  value:
    apiVersion: appstudio.redhat.com/v1beta2
    kind: IntegrationTestScenario
    metadata:
      labels:
        test.appstudio.openshift.io/optional: "true"
      name: "rhtas-operator-e2e-test{{.nameSuffix}}"
    spec:
      application: "{{.application}}{{.nameSuffix}}"
      contexts:
        - description: runs the integration test for a group Snapshot
          name: group
      params:
        - name: releaseBranch
          value: "{{.branch}}"
      resolverRef:
        params:
          - name: url
            value: https://github.com/securesign/pipelines.git
          - name: revision
            value: main
          - name: pathInRepo
            value: pipelines/integration-test/rhtas-operator-e2e.yaml
        resolver: git
        resourceKind: pipelinerun

- op: add
  path: /spec/resources/-
  value:
    apiVersion: appstudio.redhat.com/v1beta2
    kind: IntegrationTestScenario
    metadata:
      labels:
        test.appstudio.openshift.io/optional: "true"
      name: "rhtas-operator-e2e-test{{.nameSuffix}}-fips"
    spec:
      application: "{{.application}}{{.nameSuffix}}"
      contexts:
        - description: runs the integration test for a group Snapshot
          name: group
      params:
        - name: FIPS_ENABLED
          value: "true"
        - name: KEYCLOAK_DISTRIBUTION
          value: "rhbk"
        - name: releaseBranch
          value: "{{.branch}}"
      resolverRef:
        params:
          - name: url
            value: https://github.com/securesign/pipelines.git
          - name: revision
            value: main
          - name: pathInRepo
            value: pipelines/integration-test/rhtas-operator-e2e.yaml
        resolver: git
        resourceKind: pipelinerun
