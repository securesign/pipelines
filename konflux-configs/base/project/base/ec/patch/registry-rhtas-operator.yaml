- op: add
  path: /spec/resources/-
  value:
    apiVersion: appstudio.redhat.com/v1beta2
    kind: IntegrationTestScenario
    metadata:
      annotations:
        test.appstudio.openshift.io/kind: enterprise-contract
      name: "{{.application}}{{.nameSuffix}}-enterprise-contract-group"
    spec:
      application: "{{.application}}{{.nameSuffix}}"
      contexts:
        - description: execute the integration test for a Snapshot of the `group` type
          name: group
      params:
        - name: POLICY_CONFIGURATION
          value: rhtap-releng-tenant/registry-rhtas
      resolverRef:
        params:
          - name: url
            value: https://github.com/konflux-ci/build-definitions
          - name: revision
            value: main
          - name: pathInRepo
            value: pipelines/enterprise-contract.yaml
        resolver: git
        resourceKind: pipeline

- op: add
  path: /spec/resources/-
  value:
    apiVersion: appstudio.redhat.com/v1beta2
    kind: IntegrationTestScenario
    metadata:
      annotations:
        test.appstudio.openshift.io/kind: enterprise-contract
      name: "{{.application}}{{.nameSuffix}}-enterprise-contract"
    spec:
      application: "{{.application}}{{.nameSuffix}}"
      contexts:
        - description: "execute the integration test when component {{.operator}}{{.nameSuffix}} updates"
          name: "component_{{.operator}}{{.nameSuffix}}"
      params:
        - name: POLICY_CONFIGURATION
          value: rhtap-releng-tenant/registry-rhtas
        - name: SINGLE_COMPONENT
          value: "true"
      resolverRef:
        params:
          - name: url
            value: https://github.com/redhat-appstudio/build-definitions
          - name: revision
            value: main
          - name: pathInRepo
            value: pipelines/enterprise-contract.yaml
        resolver: git
        resourceKind: pipeline
